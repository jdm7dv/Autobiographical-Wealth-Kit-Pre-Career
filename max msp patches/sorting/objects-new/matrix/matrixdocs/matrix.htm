<!doctype html public "-//w3c//dtd html 4.0 transitional//en"><html><head>   <title>matrix</title></head><body><h2>matrix</h2>data flow re-router <p>see also <a href="matrix2.htm" target="_self">matrix v.4 enhancements</a></p><p>Created by Panaiotis<br>  &copy; 2001 by Panaiotis. All rights reserved.</p><h3><b><font size=+1>General</font></b></h3><b>matrix</b> is a data routing object. It is similar to <b>gate</b> with several additional features. <b>matrix</b> can have up to 253 data inlets and 253 outlets. The actual number is limited to: <blockquote>  <p>#inlets * #outlets &lt;= 29600</p></blockquote><p>The message from any data inlet can be sent to any combination of outlets.   The outlet assignments of each inlet are independent of each other. <p><b>Matrix</b> will always have one more inlet and outlet than requested. The   leftmost inlet is a control inlet and is used exclusively to alter the configuration   of the matrix. All other inlets are data inlets that pass information through   assigned outlets. The data inlets may also be directed to interpret assignment   command messages. The first (or last, depending on arg4) outlet currently does   nothing. It will eventually be used to output configuration information. <h3>Configuring matrix routing</h3><p>There are two modes that affect configuration. In the default mode, <b>matrix</b>   is configured through the leftmost inlet only. The syntax for configuring is: <p>Msg1: <code>[list]</code>, Msg2: <code>[symbol list]</code> <ol>  <li>The first message is a list of numbers representing the inlets that the     second message will configure.</li>  <li>The second message is a symbol followed by a list of outlets that are affected     by the operation governed by the symbol.</li></ol><p>In the second mode, <b>matrix</b> may be configured either through the leftmost   &quot;control&quot; inlet, or from any data inlet. In this mode configuration   through the control inlet is the same as above. Configuration through the data   inlets only affects the outlet status for the inlet receiving configuration   messages. The message is the same as Msg2 mentioned above.</p><h4>Input in leftmost (configuration control) inlet</h4><p>The leftmost inlet is a control inlet and can be used to simultaneously configure   several inlets. Therefore, the left inlet must first receive a list of numbers   (or an int for a single inlet assignment) that tells <b>matrix</b> which data   inlets are to be configured by subsequent assignment commands sent through the   left inlet. Once this list is received, it is in effect until a new list of   inlets is received.</p><table border="1" cellspacing="0">  <tr>     <td width="10">&nbsp;</td>    <td>list</td>    <td>       <p>A list of data inlets for which subsequent configuration messages will         affect.</p>      <p>Example:<code> [1 3 6]</code> will prepare matrix to configure data inlets         1, 3, and 6. </p>    </td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td>int</td>    <td>Tells <b>matrix</b> which data inlet is to be configured by subsequent       assignment commands sent through the left inlet.</td>  </tr>  <tr>    <td width="10">&nbsp;</td>    <td>all</td>    <td>The symbol <code>[all]</code> prepares matrix to configure all inlets       with subsequent configuration messages.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td>bang</td>    <td>ignored</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td>float</td>    <td>ignored</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td>symbols</td>    <td>The symbols listed below under Assignment Commands will alter the <b>matrix</b>       outlet configuration for the inlet(s) determined by the most recent list       of inlets as mentioned above.</td>  </tr></table><h4>Input to data inlets</h4><table BORDER cellspacing="0" >  <tr>     <td width="10">&nbsp;</td>    <td>bang</td>    <td>bang is sent to outlets assigned to the particular inlet.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td>int</td>    <td>int is sent to outlets assigned to the particular inlet.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td>List</td>    <td>the list is sent to outlets assigned to the particular inlet.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td>float</td>    <td>float is sent to outlets assigned to the particular inlet.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td>symbols</td>    <td>the symbol (or list of symbols) will be sent through outlets assigned       to the particular inlet unless <b>matrix</b> is set to interpret symbols       as assignment controls. In this case, the symbols listed below will alter       the <b>matrix</b> outlet configuration for the inlet the symbol is sent       through. Anything else is passed through assigned outlets.</td>  </tr></table><br><h3>&nbsp;Assignment Commands</h3><p> <b>matrix</b> has (number of data inlets) X (number of outlets) on/off gates.   The messages to configure the matrix routing turn these gates on or off according   to the operation and, often, the current state of each gate.<p>Outlet assignments are made through the leftmost inlet. If <b>matrix</b> is   sent an&nbsp;<img SRC="matriximgs/Image1.gif" width=22> message (or arg3 of   <b>matrix</b> is 1), assignment commands may be sent through data inlets. When   this is the case, assignment commands sent through data inlets only affect the   assignments for that particular inlet. An&nbsp;<img SRC="matriximgs/Image2.gif" width=21>   tells <b>matrix</b> to interpret assignment commands that are sent to the leftmost   inlet only. The following discussion assumes that <b>matrix</b> was set to interpret   assignment commands sent to any inlet.<p>Outlet assignments are made by sending a list of outlet numbers prepended with   a symbol that tells <b>matrix</b> what to do with the list.<br>  Example:<code> [= 2 5]</code> opens outlets 2 and 5 and closes all others for   associated inlets.<p>In most cases, when <b>matrix</b> is set to allow configuration through its   data inlets, configuration messages sent to a data inlet does the same thing   as the same message sent through the control inlet.<p>Often, a symbol sent without arguments is a shortcut way to do the operation   with a list of all outlets.<p>In the description below, the affected outlets are for the active inlets list   if the message is sent to the control inlet, or the inlet that the message is   sent through.<table border="1" cellspacing="0">  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>=</b> N1 N2&#133;</td>    <td>open these outlets, close all others for this (or these) inlet(s)only.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b></b></td>    <td><img src="matriximgs/Image3.gif"> in data2 inlet:<br>      routes data sent through data inlet 2 to outlets 2 and 4 only.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>=</b></td>    <td>       <p>When no outlet list is appended to the &quot;=&quot; symbol, matrix opens         only the outlet(s) corresponding to this (or these) inlets.</p>      <p> An [all] [=] or [all, =] message in the leftmost inlet will open in1/out1,         in2/out2, .... This is a shortcut to:</p>      <p>[1, = 1], [2, = 2], [3, =3]...</p>      <p>[2 3 6] [=] will subsequently configure inlets 2, 3, and 6 as:<br>        in2/out2, in3/out3, in6/out6. </p>    </td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b></b></td>    <td>       <p><img src="matriximgs/equal.gif" width=14> In data4<br>        open only outlet 4 for inlet 4.</p>      <p>&nbsp; </p>    </td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>+</b> N1 N2&#133;</td>    <td>open these outlets. Leave the condition of other outlets alone.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>+</b></td>    <td>without arg list, open all outlets.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>&#150;</b> N1 N2&#133;</td>    <td>close these outlets. Leave the condition of other outlets alone.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>&#150;</b></td>    <td>Without arg list, close all outlets.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>t </b>N1 N2</td>    <td>toggle the on/off state of these outlets. Leave the condition of other       outlets alone.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>t</b></td>    <td>without arg list, toggle the on/off state of all outlets.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>All</b></td>    <td>       <p>in left inlet selects all inlets for subsequent assignment command messages         sent to left inlet. </p>      <p>Example: [all] [+] configures all inlets to send to all outlets.</p>      <p>[All] [-] closes everything.</p>    </td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b></b></td>    <td>In data inlets: same as + with no arg list: opens all outlets for data       inlet.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>&lt;</b> N1 N2</td>    <td>       <p>rotate to the left the on/off state of these outlets. Arg list number         order is significant.</p>      <table border="0" cellpadding="0" cellspacing="0">        <tr>           <td>If the status of 5 outlets for a particular inlet is (0=closed,             1=open):</td>        </tr>        <tr>           <td>             <blockquote>               <p>0 1 1 0 1</p>            </blockquote>          </td>        </tr>        <tr>           <td>and&nbsp;<img src="matriximgs/Image5.gif" width=40> is sent, the             result will be:</td>        </tr>        <tr>           <td>             <blockquote>               <p>0 0 1 1 1 </p>            </blockquote>          </td>        </tr>        <tr>           <td>The status of 2 will be given to 3 (2 was open, so open 3). 3 will             be given to 4 (3 was open so open 4). 4 will be given to 2 (4 was             closed so close 2). The status of 1 and 5 are not altered.</td>        </tr>        <tr>           <td>If the message&nbsp;<img src="matriximgs/Image6.gif" width=40> is             sent, the result will be (notice, same numbers, different order):</td>        </tr>        <tr>           <td>             <blockquote>               <p>0 1 0 1 1</p>            </blockquote>          </td>        </tr>      </table>    </td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>&lt;</b></td>    <td>left rotate status of all outlets.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>&gt;</b></td>    <td>Same as &lt; except rotate right.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>rev</b> N1 N2&#133;</td>    <td>reverse the order of the status of these outlets. Arg list number order       is significant.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b></b></td>    <td>       <table border="0" cellpadding="0" cellspacing="0">        <tr>           <td>If the status of 5 outlets for a particular inlet is: </td>        </tr>        <tr>           <td>             <blockquote>               <p>0 1 1 0 0</p>            </blockquote>          </td>        </tr>        <tr>           <td>and&nbsp;<img src="matriximgs/Image7.gif" width=60> is sent, the             result will be:</td>        </tr>        <tr>           <td>             <blockquote>               <p>0 0 0 1 1</p>            </blockquote>          </td>        </tr>        <tr>           <td>The status of 3 and 5 are swapped and the status of 2 and 4 are             swapped.</td>        </tr>      </table>    </td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>Rev</b></td>    <td>without arg list: Reverse the status of all outlets.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b><img src="matriximgs/Image2.gif" width=21></b></td>    <td>In control inlet: tells <b>matrix</b> to pass all messages sent through       the data inlets without any interpretation. This is the default behavior       of <b>matrix</b>. </td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b><img src="matriximgs/Image1.gif" width=22></b></td>    <td>In control inlet: assignment commands will be interpreted when sent through       data inlets. When this is the case, assignment commands sent through data       inlets only affect the assignments for that particular inlet.</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="66"><b>s</b></td>    <td>       <p>S in data inlets when&nbsp;<img src="matriximgs/Image1.gif" width=22>         has been issued or arg3 is &quot;1&quot; (see below): S is a symbol. The         's' prepended to a symbol tells <b>matrix</b> to send the symbol (without         the prepended 's') to outlet(s) assigned to the particular inlet. This         is one way of sending the above listed assignment symbols through a data         inlet while <b>matrix</b> is interpreting such symbols.</p>      <p>Example: if matrix is set to allow configuration through inlets and you         want to send the message [t 5 6] through data3, then you would need to         actually send the message [s t 5 6]. The first 's' is stripped from the         original and tells matrix not to interpret the 't' as a toggle configuration         command.</p>      <p>A safer way to do this is to momentarily shut off inlet configuration         by sending an <img src="matriximgs/Image2.gif" width=21> message to the         control inlet. Then send the [t 5 6] through data3. You can send an <img src="matriximgs/Image1.gif" width=22>         message to the control inlet to continue allowing configuration through         data inlets.</p>      <p>In general, configuring matrix through data inlets works best if you         are sending ints, floats, and lists, and no symbols.</p>    </td>  </tr></table><h3>Arguments</h3><p>All arguments are integers. The first two are obligatory, the second two are   optional. </p><table border="1" cellspacing="0">  <tr>     <td width="10">&nbsp;</td>    <td width="60">arg1</td>    <td>number of inlets (maximum 253).</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="60">arg2</td>    <td>number of outlets (maximum 253). The actual number of inlets and outlets       is a combination by which inlets*outlets=30,600</td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="60">arg3</td>    <td>       <p>(optional unless arg4 is needed).       <p>0: (default if not provided): matrix passes <i>all</i> messages from         data inlets through assigned outlets. Configuration can only be made through         the leftmost inlet.       <p>1: matrix will interpret special assignment commands that are sent through         data inlets. Anything that is not interpreted as an assignment command         will be sent through assigned outlets.      <p><b><img src="matriximgs/Image2.gif" width=21></b> and <b><img src="matriximgs/Image1.gif" width=22></b>         sent through the leftmost inlet will change this configuration after matrix         has been initialized.     </td>  </tr>  <tr>     <td width="10">&nbsp;</td>    <td width="60">arg4</td>    <td>       <p>(optional)</p>      <p>0: (default if not provided): matrix will eventually send configuration         data out the <i>rightmost</i> outlet. The leftmost outlet is the first         data outlet.</p>      <p>1: matrix will eventually send configuration data out the <i>leftmost</i>         outlet. The second outlet from the left is the first data outlet. </p>    </td>  </tr></table><h3>Output </h3><blockquote>   <p>Anything:</p></blockquote><p>Messages received by data inlets are passed out the specified outlets according   to the configuration of the <b>matrix</b> as discussed above. All types of data   are passed through. Symbols are a special case when matrix is set to allow inlet   configuration through the data inlets (see discussion above). All output is   in standard right to left order. Assignment reversal, rotation, etc. do not   affect the right to left output order. They only affect the internal matrix   configuration.</p><h3>Examples</h3><table BORDER=0 CELLSPACING=0 CELLPADDING=4 >  <tr>     <td VALIGN=TOP WIDTH="174"> <img SRC="matriximgs/matrix_ex1.gif" height=80 width=132>     </td>    <td VALIGN=TOP WIDTH="438">      <p><img SRC="matriximgs/Image9.gif" width=35> will assign each inlet to         its respective outlet.</p>      <p> Each&nbsp;<img SRC="matriximgs/lt.gif" width=14> or&nbsp;<img SRC="matriximgs/gt.gif" width=14>         message will rotate all assignments one position left or right.</p>    </td>  </tr>  <tr>     <td VALIGN=TOP WIDTH="174"> <img SRC="matriximgs/matrix_ex2.gif" height=80 width=133>     </td>    <td VALIGN=TOP WIDTH="438">       <p><img SRC="matriximgs/gt.gif" width=14> message shifted the assignments.</p>      <p>NB: the example does not include the control outlet because it was made         before that feature (which is still not functional) was implemented.</p>    </td>  </tr></table><h3>See also </h3><blockquote>  <p><b>gate</b>, <b>reroute</b>, <b>switch</b></p></blockquote></body></html>
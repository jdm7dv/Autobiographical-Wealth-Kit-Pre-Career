	Spat-1.1: some complements to the manuals	=========================================These release notes are intended to serve as a complement to the Introduction and Reference manuals written in 1994-1995 (note that the release notes for the previous versions Spat-0.2 and Spat-1.0 are included here).Contents:---------1.  SPATIAL REPRODUCTION TECHNIQUES AND FORMATS      Summary of Pan and Out modules2.  3-D REPRODUCTION MODES ON TWO CHANNELS2.1.  Principles of binaural reproduction2.2.  Implementation of binaural synthesis 2.3.  Headphone equalization2.4.  Transaural reproduction2.5.  Setting the default search path3.  CONTROLLING THE RADIATION OF THE VIRTUAL SOURCE3.1.  Source directivity3.2.  Source orientation4.  MISCELLANEOUS4.1.  Resetting the Spat~ module4.2.  Control syntax of the Room~/Room_ module5.  REVISIONS AND FIXED BUGS1.  MULTICHANNEL LOUSPEAKER REPRODUCTION TECHNIQUES===================================================Open help-Pan~.pat and help-Out~.pat in the 'lib' folder formore information on the different modes (or open Pan~.help andOut~.help in the 'help' folder on a Mac). Also check out thehelp patches for the 'pan*~' family of objects.		Pan~	Out~		     comments===============================================================stereo		  2a	  2a2		      compatible M-S		2c              compatible X-Y		2d			           compatible A-B (ORTF)---------------------------------------------------------------binaural  2b			           compatible dummy head (headphones)		2b	  2b2		      "transaural"		4b	  4b4		      "Q-biphonics"---------------------------------------------------------------ambisonic  3a              horizontal B format encoding  3a	  3a4		      rectangular setups		3a	  3a5-3a8		  regular polygonal setups		4a			           periphonic B format encoding---------------------------------------------------------------pairwise intensity pan  4r-8r			        typically for concert---------------------------------------------------------------surround  3s			           L-R-S		3s	  3s2		      Lt-Rt	compatible Dolby stereo		4s			           L-C-R-S		4s	  4s2		      Lt-Rt	compatible Dolby stereo		2s3		           L-R-S   "passive" decoder		2s4		           L-C-R-S	(same with center)---------------------------------------------------------------eq & time alignment       4hl-8hl2.  3-D REPRODUCTION MODES ON TWO CHANNELS==========================================2.1.  Principles of binaural reproduction-----------------------------------------The principles of binaural spatialization are derived from the dummy-head recording technique. Such recordings are made with two small microphones inserted in the ear canals of a dummy head (or even an individual) and are intended for reproduction over headphones. Provided that some care is taken in correcting the frequency response of the headphones used for playback, this technique provides very realistic sound reproduction.Using two digital filters (left and right) to process a monophonic source signal, it is possible to obtain the electronic equivalent of the binaural recording technique, i.e. synthesize a binaural signal from a mono signal. This is the type of processing performed in the version '2b' of the Pan~ module. It allows to create, over headphones, a virtual sound source that can be placed anywhere around the listener (without producing the usual 'inside the head' sensation associated with headphone listening).2.2.  Implementation of binaural synthesis ------------------------------------------In Spat-0.2, the binaural reproduction of the direction of the sound is essentially performed by the elementary binaural panpot module panb2~. The databases of digital filter coefficients were designed from measurements performed on a dummy head by Bill Gardner and Keith Martin at the MIT Media Laboratory. At the moment, these databases are limited to directions in the upper hemisphere (i.e. positive values of the elevation angle); consequently the binaural panpot does not allow to simulate sounds located below the horizontal plane (in a future release, scheduled in 1997, new databases designed from measurements made recently at Ircam will provide for negative elevation).Unfortunately, since the measurements cannot be made practically on the listener himself, the binaural reproduction cannot be perfectly exact. The main perceptual consequence on the auditory impression over headphones is that sounds positionned in the frontal sector will often be perceived more elevated and possibly somewhat closer than intended. However, this problem can be largely overcome if a "headtracker" is connected in real time to Spat~ during reproduction in order to compensate for the rotations of the listener's head, and if visual cues are reproduced in association with the auditory reproduction. Spat~ has been tested to allow for this type of application (virtual reality). Opcode Max patches for Macintosh have been developped to allow connection of Spat~ to a headtracker via MIDI.2.3.  Headphone equalization----------------------------Spat-0.2 does not provide digital filters for equalizing the frequency response of a particular pair of headphones. Headphone manufacturers have handled headphone equalization by defining standards. Two main standards have been proposed: 'free-field' equalization or 'diffuse-field' equalization. In Spat-0.2 the binaural synthesis filters are designed for diffuse-field equalization.Diffuse-field equalization has a number of advantages, and has been recommended in the past ten years for professional hi-fi headphones. An example of a diffuse-field equalized headphone pair is the Sennheiser HD414. Since headphone equalization can significantly affect the naturalness of the binaural reproduction, it is recommended to use diffuse-field equalized headphones with Spat-0.2. Future realeases of Spat~ will allow to select among several possible headphone equalization filters (since there are still many free-field equalized headphones out there).2.4.  Transaural reproduction-----------------------------A two-channel binaural signal (obtained by binaural recording of a real sound field or synthesized electronically by binaural processing or mixing) can be converted into a transaural signal (to be reproduced over two loudspeakers) by use of the Out~ module in version '2t'. This is necessary in order to compensate for the effect of the 'cross-talk' acoustic paths (left speaker to right ear, right speaker to left ear). This post-processing of a binaural signal will allow to preserve, when the transaural output is reproduecd over two loudspeakers, the original localizations of sounds as encoded in the binaural input signal.However, the cross-talk compensation assumes a relatively strong constraint on the relative positions of the listener and the two loudspeakers. The design of the elementary transaural conversion module (trans~) assumes a layout corresponding to the conventional stereo listening configuration, forming an equilateral triangle. In other words, the two loudspeakers should positionned in front of the listener at azimuths +30 and -30 degrees and at the same distance from the head. For best results, the loudspeakers should be oriented towards the head of the listener, wired in phase and adjusted to provide the same gain and frequency response. Also, the presence of acoustic obstacles near the speakers or the listener should be avoided.When the above conditions cannot be be satisfied, it is found that sounds positionned laterally, in elevation or in the rear will tend to be perceived as located in the vicinity of the louspeakers, although a sense of depth and witdh will be preserved. Despite these limitations, experience has shown that transaural processing is useful for recording spatial effects on a two-channel medium such as a CD. It should also be noted that the transaural conversion modules (Out~ or trans~) can be set to perform the reciprocal conversion, i.e. transform a two-channel signal intended for reproduction on two speakers into a signal appropriate for reproduction over headphones. When applied to a conventional stereo recording, this processing will provide the natural timbral and spatial sensation of listening over two louspeakers positionned in front of the listener rather than over headphones.2.5.  Setting the default search path-------------------------------------Binaural or transaural processing modules require a database of digital filter coefficients which depends the sample rate. Three databases are provided in Spat-0.2, in the folders 'b32_', 'b44_' and 'b48_' corresponding respectively to sampling rates 32 kHz, 44.1 kHz and 48 kHz. Care must be taken when using binaural or transaural modules that the Max default search path should provide access to the proper binaural database (a warning will be issued in the Max window if the database found does not match the sample rate).3.  CONTROLLING THE RADIATION OF THE VIRTUAL SOURCE===================================================3.1.  Source directivity------------------------The perceptual factors displayed in the main window of Spat_OPer can be considered as describing the acoustical quality that would cerated by an omnidirectional sound source at a given position in a room. The 'radiation' window provides the necessary additional spectral corrections to account for the directivity of the virtual sound source. The 'axis' correction affects the spectrum of the direct sound while the 'omni' correction affects the spectrum of the room effect. Note that, contrary to section 4.3 (p. 4-5) of the introduction manual, the perceptual factors in the main window are not affected by the controls in the 'radiation' window.Practically, for an omnidirectional source, the 'axis' and 'omni' corrections should be identical, while in the case of a directional source such as a trombone facing the listener, the 'omni' correction should be lowpass compared to the 'axis' correction. 3.2.  Source orientation------------------------The 'Yaw' and 'Pitch' controls are not yet implemented in Spat-1.1 (contrary to the reference manual, p. 4-2), which implies that the source is assumed to be facing the listener (even when it rotates around the listener). However, it is possible to simulate a source rotating away from the listener by modifying the 'axis' correction (typically: cut the mid frequencies somewhat and the high frequencies even more).The effect of the 'face' and 'omni' equalizations available in the Source~ module is analogous to that of the 'axis' and 'omni' corrections in Spat_OPer (see section 3.1 of the introduction manual). However, the 'axis' and omni' corrections respectively affect the 'direct' and 'room' filters in the Room~ module (see section 3.2.2 of the introduction manual) instead of the filters in the Source~ module. The latter are optional and are not controlled in Spat_OPer; they should be used mainly to provide a (usually fixed) additional input 'pre-equalization' when necessary.4.  MISCELLANEOUS=================4.1.  Resetting the Spat~ module--------------------------------Because the 'bang' message is common to all main low-level modules (Source~, Room~, Pan~, Out~), there is no way currently to reset them selectively when they are connected together in the Spat~ object. Resetting Spat~/Spat_ can be done only globally (using the reset button in Source_, Room_, Pan_ or Out_ will actually reset the three other modules too!).4.2.  Control syntax of the Room~/Room_ module----------------------------------------------In the Reference Manual, bottom of p. 2-5: 'distr' should be replaced by 'delay distr'; 'the sum of the squares' should be replaced by 'the average of the squares'.5.  REVISIONS AND FIXED BUGS============================  (-- take a look at the new or revised help-patches!)Pan~/Pan_: there is a new version '2b' of Pan~, producing a binaural signal for three-dimensional sound reproduction over headphones.Pan~/Pan_: The elevation can now be controlled (currently limited to the upper hemisphere) in all reproduction modes. It is more efficient in binaural or transaural mode and less efficient with multi-channel loudspeaker setups (especially for non-central listeners).Pan~/Pan_: The default value of 'width' is 30 instead of 45.Pan~ has improved control methods, and an internal speedlimiting time of 30 ms in order to avoid 'clicks' caused by control overload. It is possible to send the message Az <list> in order to control the azimuth and the distance (and the elevation) with a single message.Spat_OPer, OPer_init and Pan_Circ have been modified accordingly. Instead of 'Az <int>, Dist <float>', Pan_Circ sends 'Az <int> <float>'.panrN~, panb2~: The elementary multi-channel panpots panrN~ have been modified (and now have a help-patch). There is a new object called panb2~ (for headphones), with a simplified implementation called sideb2~.Out~/Out_: there is a new version '2t' of Out~, allowing conversion of a binaural signal to transaural format, for three-dimensional sound reproduction over a pair of loudspeakers positionned according to the conventional stereo layout. This processing uses the elementary signal processing module trans~.Room~: there is a new version '6c' of Room~, whose complexity (i.e cost) is intermediate between versions '4c' and '8c'. The default frequency density is now identical in all implementations of Room~ (it was lower for version '4c' in Spat-0.1). The main difference in sound quality between versions '4c', '6c' and '8c' should be the time density (echo density): versions '4c' (and '6c') may sound less natural than version '8c' in the presence of percussive sounds.Room~: delfback1~ (used in reverbN~) has been modified in order to avoid annoying noises caused by sudden and large changes of decay time (tr0). reverb8~, used in version '8c' of Room~, now has a help-patch and can be used as a basic elementary reverberator.Room~/Room_: There were a number of errors in the help patch describing the control syntax. They have been corrected in the help patch (but unfortunately they remain in the reference manual). Also, the elementary control module 'delay' no longer ignores its second argument.Source~: The bug in configuration '1Dhl' has been fixed.Spat_OPer has an internal speedlimiting time for perceptual factors and objective criteria (in order to avoid 'clicks' caused by control overload or simultaneous updates of factors or criteria). Its default value is 60 ms and it can be changed by a 'speedlim <int>' message (a modified version of speedlim, called speedlim2, is used because speedlim has a bug in Max-0.26).
max v2;#N vpatcher -915 -420 -815 -320;#P hidden outlet 26 139 15 0;#P hidden comment 24 158 33 1376265 dsp;#N vpatcher 226 549 531 761;#N vpatcher 465 182 747 559;#P newex 23 240 65 9 / -0.275443;#P newex 126 42 96 9 r $0-speedlim;#P newex 81 126 56 9 deg2rad;#P newex 81 103 69 9 clip 10 180;#P newex 81 151 37 9 t b f;#P newex 108 207 122 9 expr -0.333333*(1-cos($f1));#P newex 81 73 75 9 speedlim2 60;#P inlet 81 43 15 0;#P comment 44 43 31 196618 A3;#P comment 144 328 119 196618 direct filter correction (patcher 'direct');#P message 23 325 119 9 \; $0-G_direct Gm \$1;#P flonum 23 301 35 10 0 0 0 3;#P comment 42 14 69 196618 1-cos(Yaw);#P inlet 23 14 15 0;#P newex 23 269 61 9 clip -30. 0.;#P connect 1 0 14 0;#P connect 10 0 14 0;#P connect 14 0 0 0;#P connect 0 0 3 0;#P connect 3 0 4 0;#P connect 9 0 14 1;#P connect 7 0 8 0;#P connect 8 0 11 0;#P connect 11 0 12 0;#P connect 12 0 10 0;#P connect 10 1 9 0;#P connect 13 0 8 1;#P pop;#P newobj 32 108 131 9 patcher Gm;#N vpatcher 465 182 747 559;#P inlet 23 13 15 0;#P comment 42 13 69 196618 1-cos(Yaw);#P flonum 23 300 35 10 0 0 0 3;#P comment 44 42 31 196618 A3;#P inlet 81 42 15 0;#P newex 81 72 75 9 speedlim2 60;#P newex 108 206 122 9 expr -0.333333*(1-cos($f1));#P newex 81 150 37 9 t b f;#P newex 81 102 69 9 clip 10 180;#P newex 81 125 56 9 deg2rad;#P newex 126 41 96 9 r $0-speedlim;#P message 23 324 119 9 \; $0-G_direct Gl \$1;#P comment 147 326 119 196618 direct filter correction (patcher 'direct');#P newex 23 239 65 9 / -0.275443;#P newex 23 268 61 9 clip -30. 0.;#P connect 14 0 1 0;#P connect 7 0 1 0;#P connect 1 0 0 0;#P connect 0 0 12 0;#P connect 12 0 3 0;#P connect 8 0 1 1;#P connect 10 0 9 0;#P connect 9 0 6 0;#P connect 6 0 5 0;#P connect 5 0 7 0;#P connect 7 1 8 0;#P connect 4 0 9 1;#P pop;#P newobj 32 134 131 9 patcher Gl;#N vpatcher 465 182 747 559;#P newex 25 244 65 9 / -0.275443;#P message 25 329 119 9 \; $0-G_direct Gh \$1;#P inlet 25 18 15 0;#P comment 44 18 69 196618 1-cos(Yaw);#P flonum 25 305 35 10 0 0 0 3;#P comment 46 47 31 196618 A3;#P inlet 83 47 15 0;#P newex 83 77 75 9 speedlim2 60;#P newex 110 211 122 9 expr -0.333333*(1-cos($f1));#P newex 83 155 37 9 t b f;#P newex 83 107 69 9 clip 10 180;#P newex 83 130 56 9 deg2rad;#P newex 128 46 96 9 r $0-speedlim;#P comment 149 331 119 196618 direct filter correction (patcher 'direct');#P newex 25 273 61 9 clip -30. 0.;#P connect 12 0 14 0;#P connect 5 0 14 0;#P connect 14 0 0 0;#P connect 0 0 10 0;#P connect 10 0 13 0;#P connect 6 0 14 1;#P connect 8 0 7 0;#P connect 7 0 4 0;#P connect 4 0 3 0;#P connect 3 0 5 0;#P connect 5 1 6 0;#P connect 2 0 7 1;#P pop;#P newobj 32 160 131 9 patcher Gh;#P comment 31 186 186 196618 G = -3 (1-cos(Yaw)) / (1-cos(A3));#P newex 183 89 90 9 r $0-A3mid;#P newex 183 115 90 9 r $0-A3low;#P newex 183 141 90 9 r $0-A3high;#P comment 183 45 97 196618 from changes of omni filter settings or aperture --v;#P comment 31 23 31 196618 Yaw;#P inlet 32 41 15 0;#P comment 68 23 42 196618 Pitch;#P inlet 72 41 15 0;#P newex 133 21 91 9 r $0-speedlim;#P inlet 153 69 15 0;#P comment 149 52 31 196618 A3;#N vpatcher 100 563 426 780;#P inlet 140 23 15 0;#P inlet 39 25 15 0;#P newex 140 45 29 9 t b i;#P newex 39 66 28 9 0;#P newex 39 94 71 9 speedlim2 60;#P comment 63 173 125 196618 1-cos(Yaw)*cos(Pitch);#P outlet 39 173 15 0;#P newex 202 86 56 9 expr cos($f1*0.017453);#P newex 39 139 173 9 expr 1-(cos($f1*0.017453)*$f2);#P inlet 243 47 15 0;#P comment 57 26 50 196618 Yaw;#P comment 158 23 50 196618 Pitch;#P connect 10 0 8 0;#P connect 9 0 8 0;#P connect 8 0 7 0;#P connect 7 0 3 0;#P connect 3 0 5 0;#P connect 2 0 7 1;#P connect 11 0 9 0;#P connect 9 1 4 0;#P connect 4 0 3 1;#P pop;#P newobj 32 82 91 9 patcher;#P connect 6 0 0 0;#P connect 0 0 15 0;#P connect 0 0 14 0;#P connect 0 0 13 0;#P connect 4 0 0 1;#P connect 3 0 0 2;#P connect 2 0 15 1;#P connect 11 0 15 1;#P connect 10 0 14 1;#P connect 9 0 13 1;#P pop;#P hidden newobj 27 104 109 1376265 patcher G_direct;#N vpatcher 100 594 398 780;#P inlet 34 37 15 0;#P inlet 105 36 15 0;#P comment 181 36 72 196617 no distinction between A3Y and A3P in this version;#P newex 33 135 93 9 s $0-GUI;#P message 33 97 44 9 source A3Y \$1;#P message 103 97 44 9 source A3P \$1;#P outlet 34 68 14 0;#P connect 5 0 2 0;#P connect 2 0 3 0;#P connect 1 0 3 0;#P connect 5 0 0 0;#P connect 6 0 0 0;#P connect 6 0 1 0;#P pop;#P hidden newobj 174 86 67 1376265 patcher same;#P hidden newex 613 51 90 1376265 s $0-speedlim;#P hidden newex 500 111 80 1376265 r $0-GUI;#P hidden outlet 500 139 15 0;#P hidden inlet 533 31 15 0;#P hidden comment 601 13 58 1376265 speedlim;#P hidden inlet 613 31 15 0;#P hidden comment 610 100 50 1376265 forward;#P hidden outlet 614 77 15 0;#P hidden newex 290 58 289 1376265 route axis omni bang;#P hidden newex 27 58 255 1376265 route Yaw Pitch Roll A3Y A3P;#N vpatcher 300 132 670 586;#P newex 30 71 30 9 route set;#P newex 144 71 30 9 route set;#P newex 106 71 30 9 route set;#P newex 68 71 30 9 route set;#P inlet 239 17 15 0;#P comment 257 17 75 196618 'source axis' filter controls;#P comment 236 258 119 196618 locally computed direct filter correction derived from orientation and directivity;#P newex 236 235 100 9 r $0-G_direct;#P newex 106 283 33 9 bop + 0. 0.;#P newex 68 283 33 9 bop + 0. 0.;#P newex 144 283 33 9 bop + 0. 0.;#P newex 91 256 124 9 route Gl Gm Gh;#P message 154 108 25 9 Gh \$1;#P message 116 108 25 9 Gm \$1;#P message 78 108 23 9 Gl \$1;#P comment 39 109 24 196617 G0;#P newex 205 136 87 9 s $0-G_axis;#P newex 30 172 20 9 bD;#P newex 53 172 162 9 route float Gl Gm Gh;#P newex 106 199 33 9 bop + 0. 0.;#P newex 30 199 33 9 bop * 1. 1.;#P newex 144 199 33 9 bop + 0. 0.;#P newex 68 199 33 9 bop + 0. 0.;#P comment 230 174 103 196618 direct filter settings for neutral source;#P inlet 318 155 15 0;#P outlet 30 419 15 0;#P message 67 389 27 9 Gl \$1;#P message 122 390 29 9 Gm \$1;#P message 176 390 29 9 Gh \$1;#P message 68 326 41 9 \$1 100;#P message 176 326 42 9 \$1 100;#P message 122 326 42 9 \$1 100;#P newex 67 346 50 9 line 0. 30;#P newex 122 346 50 9 line 0. 15;#P newex 176 346 50 9 line 0. 7;#P newex 11 45 238 9 hlshelf1+ 1;#P connect 0 1 35 0;#P connect 35 0 18 0;#P connect 18 0 15 0;#P connect 15 0 10 0;#P connect 7 0 10 0;#P connect 9 0 10 0;#P connect 8 0 10 0;#P connect 11 0 17 0;#P connect 17 0 15 1;#P connect 6 0 3 0;#P connect 3 0 9 0;#P connect 0 3 32 0;#P connect 32 0 13 0;#P connect 13 0 26 0;#P connect 26 0 6 0;#P connect 32 0 21 0;#P connect 17 1 13 1;#P connect 28 0 24 0;#P connect 24 0 26 1;#P connect 0 5 33 0;#P connect 33 0 16 0;#P connect 16 0 27 0;#P connect 33 0 22 0;#P connect 27 0 4 0;#P connect 4 0 2 0;#P connect 2 0 8 0;#P connect 17 2 16 1;#P connect 24 1 27 1;#P connect 0 7 34 0;#P connect 34 0 14 0;#P connect 14 0 25 0;#P connect 34 0 23 0;#P connect 17 3 14 1;#P connect 24 2 25 1;#P connect 25 0 5 0;#P connect 5 0 1 0;#P connect 1 0 7 0;#P connect 21 0 19 0;#P connect 23 0 19 0;#P connect 22 0 19 0;#P connect 31 0 0 12;#P pop;#P hidden newobj 290 94 81 1376265 patcher direct;#P hidden comment 280 158 41 1376265 direct;#P hidden outlet 290 139 15 0;#P hidden comment 24 14 59 1376265 source;#N vpatcher 296 68 680 504;#P comment 262 16 79 196618 'source omni' filter controls;#P newex 111 67 30 9 route set;#N vpatcher 300 231 761 601;#P inlet 121 33 15 0;#P comment 122 16 31 196618 Gm;#P comment 219 16 31 196618 Gh;#P inlet 223 33 15 0;#P comment 24 15 31 196618 Gl;#P inlet 25 33 15 0;#P newex 223 73 75 9 speedlim2 60;#P newex 121 72 75 9 speedlim2 60;#P newex 25 73 75 9 speedlim2 60;#P newex 286 29 80 9 r $0-speedlim;#P newex 34 106 307 9 route Gl Gm Gh;#P newex 121 172 59 9 clip -20. 0.;#P newex 223 172 59 9 clip -20. 0.;#P newex 25 172 59 9 clip -20. 0.;#P newex 49 300 75 9 s $0-A3low;#P newex 145 300 75 9 s $0-A3mid;#P newex 245 300 75 9 s $0-A3high;#P message 145 325 186 9 \; $0-GUI source A3Y \$1 \, source A3P \$1;#P comment 336 325 97 196618 display mid-freq aperture;#P comment 336 289 113 196618 send to update direct filter correction;#P number 49 273 43 10 0 0 0 3;#P newex 49 216 25 9 bD;#P newex 49 244 31 9 g2A;#P number 245 271 43 10 0 0 0 3;#P newex 245 214 25 9 bD;#P newex 245 242 31 9 g2A;#P number 145 273 43 10 0 0 0 3;#P newex 145 216 25 9 bD;#P newex 145 244 31 9 g2A;#P comment 95 257 33 196618 A3 low;#P comment 293 257 33 196618 A3 high;#P comment 191 257 31 196618 A3 mid;#P comment 336 242 94 196618 compute aperture angles in 3 bands;#P outlet 223 211 15 0;#P outlet 121 211 15 0;#P outlet 25 211 15 0;#P comment 335 139 86 196618 subtract axis correction;#P newex 351 86 86 9 r $0-G_axis;#P newex 223 133 33 9 - 0.;#P newex 121 134 33 9 - 0.;#P newex 25 133 33 9 - 0.;#P connect 35 0 32 0;#P connect 32 0 0 0;#P connect 0 0 27 0;#P connect 27 0 5 0;#P connect 3 0 30 0;#P connect 30 0 0 1;#P connect 27 0 19 0;#P connect 19 0 18 0;#P connect 18 0 20 0;#P connect 20 0 26 0;#P connect 31 0 32 1;#P connect 40 0 33 0;#P connect 33 0 1 0;#P connect 1 0 29 0;#P connect 29 0 6 0;#P connect 30 1 1 1;#P connect 29 0 13 0;#P connect 13 0 12 0;#P connect 12 0 14 0;#P connect 14 0 25 0;#P connect 14 0 23 0;#P connect 31 0 33 1;#P connect 37 0 34 0;#P connect 34 0 2 0;#P connect 2 0 28 0;#P connect 28 0 7 0;#P connect 28 0 16 0;#P connect 16 0 15 0;#P connect 15 0 17 0;#P connect 17 0 24 0;#P connect 30 2 2 1;#P connect 31 0 34 1;#P pop;#P newobj 73 133 86 9 patcher A3;#P inlet 244 16 15 0;#P newex 35 67 30 9 route set;#P newex 149 67 30 9 route set;#P newex 73 67 30 9 route set;#P comment 157 100 24 196618 Gh;#P comment 119 100 24 196618 Gm;#P comment 81 100 24 196618 Gl;#P comment 43 100 24 196618 G0;#P message 73 373 27 9 Gl \$1;#P outlet 35 403 15 0;#P message 111 373 29 9 Gm \$1;#P message 149 373 29 9 Gh \$1;#P newex 96 194 124 9 route Gl Gm Gh;#P newex 149 333 33 9 bop + 0. 0.;#P newex 73 333 33 9 bop + 0. 0.;#P newex 111 333 33 9 bop + 0. 0.;#P newex 35 333 33 9 bop * 1. 1.;#P newex 35 306 20 9 bD;#P newex 58 306 162 9 route float Gl Gm Gh;#P comment 171 123 164 196618 convert to relative omni-axis settings \, update aperture angles \, clip omni-axis to 0dB.;#P newex 241 173 100 9 r $0-G_omni-axis;#P inlet 326 289 15 0;#P comment 244 309 102 196618 room filter settings for neutral source;#P comment 239 197 132 196618 ^ locally computed relative omni-axis settings derived from aperture angle;#N vpatcher 250 386 563 650;#P newex 239 149 42 9 fdel 45;#P newex 196 149 42 9 fdel 45;#P newex 153 149 42 9 fdel 45;#P newex 153 225 86 9 s $0-GUI;#P newex 153 199 111 9 prepend source omni;#P message 239 171 36 9 Gh \$1;#P message 196 171 36 9 Gm \$1;#P message 153 171 34 9 Gl \$1;#P newex 63 96 33 9 bop + 0. 0.;#P newex 25 96 33 9 bop + 0. 0.;#P newex 101 96 33 9 bop + 0. 0.;#P newex 48 66 124 9 route Gl Gm Gh;#P inlet 25 33 15 0;#P comment 24 15 31 196618 Gl;#P inlet 63 32 15 0;#P comment 64 15 31 196618 Gm;#P inlet 101 32 15 0;#P comment 97 15 31 196618 Gh;#P outlet 25 155 15 0;#P outlet 63 155 15 0;#P outlet 101 156 15 0;#P newex 143 30 100 9 r $0-G_axis;#P newex 185 75 96 9 r $0-speedlim;#P newex 185 103 38 9 * 0.75;#P connect 11 0 14 0;#P connect 14 0 5 0;#P connect 2 0 12 0;#P connect 12 0 14 1;#P connect 9 0 15 0;#P connect 15 0 4 0;#P connect 12 1 15 1;#P connect 7 0 13 0;#P connect 13 0 3 0;#P connect 12 2 13 1;#P connect 14 0 21 0;#P connect 21 0 16 0;#P connect 16 0 19 0;#P connect 18 0 19 0;#P connect 17 0 19 0;#P connect 19 0 20 0;#P connect 1 0 0 0;#P connect 0 0 21 1;#P connect 15 0 22 0;#P connect 22 0 17 0;#P connect 0 0 22 1;#P connect 13 0 23 0;#P connect 23 0 18 0;#P connect 0 0 23 1;#P pop;#P newobj 73 256 86 9 patcher omni;#P comment 171 245 146 196618 convert back to absolute omni settings \, update display in 'radiation' window;#P newex 16 41 238 9 hlshelf1+ 1;#P connect 0 1 25 0;#P connect 25 0 9 0;#P connect 9 0 10 0;#P connect 10 0 17 0;#P connect 15 0 17 0;#P connect 16 0 17 0;#P connect 18 0 17 0;#P connect 5 0 8 0;#P connect 8 0 10 1;#P connect 0 3 23 0;#P connect 23 0 27 0;#P connect 14 0 2 0;#P connect 27 0 2 0;#P connect 2 0 12 0;#P connect 12 0 18 0;#P connect 6 0 14 0;#P connect 8 1 12 1;#P connect 0 5 28 0;#P connect 28 0 27 1;#P connect 14 1 2 1;#P connect 27 1 2 1;#P connect 2 1 11 0;#P connect 11 0 16 0;#P connect 8 2 11 1;#P connect 0 7 24 0;#P connect 24 0 27 2;#P connect 14 2 2 2;#P connect 27 2 2 2;#P connect 2 2 13 0;#P connect 13 0 15 0;#P connect 8 3 13 1;#P connect 26 0 0 12;#P pop;#P hidden newobj 383 94 81 1376265 patcher room;#P hidden outlet 383 139 15 0;#P hidden comment 374 158 41 1376265 room;#P hidden inlet 454 31 15 0;#P hidden comment 445 13 41 1376265 room;#P hidden comment 354 13 41 1376265 direct;#P hidden inlet 361 31 15 0;#P hidden comment 499 158 107 1376265 to GUI for display;#P hidden inlet 27 31 15 0;#N vpatcher 188 140 441 358;#P comment 43 17 25 196618 A3;#P inlet 26 17 15 0;#P newex 26 45 75 9 speedlim2 60;#P newex 91 18 96 9 r $0-speedlim;#N vpatcher 262 188 531 472;#P inlet 13 21 15 0;#P newex 30 107 33 9 / 80.;#P newex 70 108 36 9 / 80.;#P newex 70 45 37 9 t b i;#P newex 13 45 50 9 t i i;#P outlet 13 252 15 0;#P outlet 53 252 15 0;#P flonum 30 140 35 10 0 0 0 3;#P flonum 70 140 35 10 0 0 0 3;#P newex 13 183 27 9 * 1.;#P newex 13 158 50 9 t i i;#P newex 53 184 27 9 * 1.;#P newex 151 51 90 9 r $0-A3low;#P newex 151 24 90 9 r $0-A3mid;#P newex 151 78 90 9 r $0-A3high;#P number 204 112 35 10 0 0 0 3;#P number 204 139 35 10 0 0 0 3;#P number 204 166 35 10 0 0 0 3;#P newex 94 165 90 9 r $0-speedlim;#P newex 131 193 30 9 * 0.3;#P newex 94 193 30 9 * 0.6;#P newex 53 222 38 9 fdel 20;#P newex 13 222 38 9 fdel 40;#P connect 22 0 18 0;#P connect 18 0 12 0;#P connect 12 0 13 0;#P connect 13 0 0 0;#P connect 0 0 17 0;#P connect 10 0 21 0;#P connect 19 0 21 0;#P connect 21 0 15 0;#P connect 15 0 13 1;#P connect 2 0 0 1;#P connect 18 1 21 1;#P connect 19 1 21 1;#P connect 12 1 11 0;#P connect 11 0 1 0;#P connect 1 0 16 0;#P connect 9 0 19 0;#P connect 8 0 20 0;#P connect 19 0 20 0;#P connect 20 0 14 0;#P connect 14 0 11 1;#P connect 3 0 1 1;#P connect 4 0 2 0;#P connect 18 1 20 1;#P connect 19 1 20 1;#P connect 4 0 3 0;#P connect 9 0 7 0;#P connect 10 0 6 0;#P connect 8 0 5 0;#P pop;#P newobj 62 70 71 9 patcher A3-low-high;#P newex 141 114 90 9 s $0-A3high;#P newex 141 139 90 9 s $0-A3low;#N vpatcher 350 341 564 550;#P flonum 23 98 35 10 0 0 0 3;#P newex 23 43 33 9 A2g;#P newex 23 72 24 9 dB;#P inlet 23 20 15 0;#P comment 61 97 30 196618 Gh;#P message 23 119 164 9 \; $0-G_omni-axis Gh \$1;#P comment 23 152 174 196618 update display and room filter (patcher 'room');#P connect 3 0 5 0;#P connect 5 0 4 0;#P connect 4 0 6 0;#P connect 6 0 1 0;#P pop;#P newobj 26 164 83 9 patcher Gh;#N vpatcher 350 341 564 550;#P inlet 21 10 15 0;#P newex 21 62 24 9 dB;#P newex 21 33 33 9 A2g;#P flonum 21 88 35 10 0 0 0 3;#P comment 59 87 30 196618 Gl;#P message 21 109 164 9 \; $0-G_omni-axis Gl \$1;#P comment 21 146 174 196618 update display and room filter (patcher 'room');#P connect 6 0 4 0;#P connect 4 0 5 0;#P connect 5 0 3 0;#P connect 3 0 1 0;#P pop;#P newobj 26 137 83 9 patcher Gl;#N vpatcher 350 341 564 550;#P inlet 18 23 15 0;#P newex 18 75 24 9 dB;#P newex 18 46 33 9 A2g;#P comment 56 100 30 196618 Gm;#P flonum 18 101 35 10 0 0 0 3;#P comment 18 155 174 196618 update display and room filter (patcher 'room');#P message 18 122 164 9 \; $0-G_omni-axis Gm \$1;#P connect 6 0 4 0;#P connect 4 0 5 0;#P connect 5 0 2 0;#P connect 2 0 0 0;#P pop;#P newobj 26 111 83 9 patcher Gm;#P connect 8 0 7 0;#P connect 7 0 0 0;#P connect 5 0 1 0;#P connect 5 1 2 0;#P connect 7 0 5 0;#P connect 6 0 7 1;#P connect 5 1 4 0;#P connect 5 0 3 0;#P pop;#P hidden newobj 174 112 72 1376265 patcher G_omni-axis;#P hidden connect 1 0 14 0;#P hidden connect 14 0 25 0;#P hidden connect 14 1 25 1;#P hidden connect 24 0 25 2;#P hidden connect 14 3 24 0;#P hidden connect 24 0 0 0;#P hidden connect 14 4 24 1;#P hidden connect 14 5 15 0;#P hidden connect 15 2 13 0;#P hidden connect 15 0 13 0;#P hidden connect 13 0 11 0;#P hidden connect 3 0 13 1;#P hidden connect 15 1 9 0;#P hidden connect 15 2 9 0;#P hidden connect 9 0 8 0;#P hidden connect 6 0 9 1;#P hidden connect 22 0 21 0;#P hidden connect 18 0 23 0;#P hidden connect 15 3 16 0;#P pop;